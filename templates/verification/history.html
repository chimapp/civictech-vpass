{% extends "base.html" %}

{% block title %}驗證歷史記錄 - {{ event.event_name }}{% endblock %}

{% block content %}
<div class="container">
    <h1>驗證歷史記錄</h1>
    <h2>{{ event.event_name }} - {{ issuer.channel_name }}</h2>

    <table>
        <thead>
            <tr>
                <th>時間</th>
                <th>結果</th>
                <th>會員</th>
                <th>卡片 ID</th>
            </tr>
        </thead>
        <tbody>
            {% for ve in events %}
            <tr>
                <td>{{ ve.event.verified_at }}</td>
                <td style="color: {% if ve.event.verification_result == "success" %}green{% else %}red{% endif %}">
                    {{ ve.event.verification_result }}
                </td>
                <td>
                    {% match ve.member %}
                        {% when Some with (m) %}
                            {{ m.default_display_name }}
                        {% when None %}
                            N/A
                    {% endmatch %}
                </td>
                <td>
                    {% match ve.card %}
                        {% when Some with (c) %}
                            {{ c.id }}
                        {% when None %}
                            N/A
                    {% endmatch %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="pagination">
        第 {{ page }} 頁，共 {{ (total + per_page - 1) / per_page }} 頁
        <br>
        {% if page > 1 %}
            <a href="?page={{ page - 1 }}">上一頁</a>
        {% endif %}
        {% if page * per_page < total %}
            <a href="?page={{ page + 1 }}">下一頁</a>
        {% endif %}
    </div>
</div>
{% endblock %}
