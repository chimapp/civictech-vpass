{% extends "base.html" %}

{% block title %}領取卡片 - VPass{% endblock %}

{% block content %}
<nav aria-label="上一頁">
    <a href="/issuers">返回</a>
</nav>

<header>
    <h1>領取卡片</h1>
    <p>會員驗證</p>
</header>

<section aria-label="頻道資訊">
    <h2>{{ issuer.channel_name }}</h2>
    <p>{{ issuer.channel_handle.as_deref().unwrap_or(issuer.youtube_channel_id.as_str()) }}</p>
</section>

{% match is_authenticated %}
    {% when false %}
        <section aria-label="登入提示">
            <h2>操作步驟</h2>
            <p>要領取 <strong>{{ issuer.channel_name }}</strong> 的會員卡片，請完成以下步驟：</p>
            <ol>
                <li>使用您的 YouTube 帳號登入。</li>
                <li>在驗證影片下留言。</li>
                <li>回到這裡並貼上留言網址。</li>
            </ol>
            <p><a href="/auth/youtube/login?return_url=/channels/{{ issuer_id }}/claim">使用 YouTube 登入</a></p>
        </section>
    {% when true %}
        <section aria-label="操作說明">
            <h2>操作說明</h2>
            <ol>
                <li>前往該頻道的會員專屬驗證影片。</li>
                <li>留下評論（任何文字都可以）。</li>
                <li>複製留言網址。</li>
                <li>貼上並送出。</li>
            </ol>
        </section>

        <form action="/channels/{{ issuer.id }}/claim" method="POST">
            <label for="comment_link">留言網址或 ID</label>
            <input type="text" name="comment_link" id="comment_link" required placeholder="https://www.youtube.com/watch?v=...&lc=...">
            <button type="submit">發行卡片</button>
        </form>
{% endmatch %}
{% endblock %}
